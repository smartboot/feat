---
title: Agent
description: Feat AI Agent ä½¿ç”¨æŒ‡å— - è®© AI åƒäººä¸€æ ·æ€è€ƒå’Œè¡ŒåŠ¨ï¼Œè‡ªåŠ¨å®Œæˆå¤æ‚ä»»åŠ¡
sidebar:
    order: 6
---

import { Aside } from '@astrojs/starlight/components';
import CheckAuthorize from '../../../components/CheckAuthorize.astro'

<CheckAuthorize/>

## Agent æ˜¯ä»€ä¹ˆï¼Ÿ

æƒ³è±¡ä½ æœ‰ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ï¼Œä¸ä»…èƒ½ç†è§£ä½ çš„éœ€æ±‚ï¼Œè¿˜èƒ½ä¸»åŠ¨é‡‡å–è¡ŒåŠ¨å»å®Œæˆä»»åŠ¡â€”â€”æœç´¢ä¿¡æ¯ã€æ“ä½œæ–‡ä»¶ã€åˆ†è§£ä»»åŠ¡ã€ç®¡ç†å¾…åŠäº‹é¡¹ï¼Œç”šè‡³è°ƒç”¨å…¶ä»– AI æ¥å¸®å¿™ã€‚è¿™å°±æ˜¯ **Feat AI Agent**ã€‚

å®ƒåŸºäº **ReActï¼ˆæ¨ç†+è¡ŒåŠ¨ï¼‰** èŒƒå¼ï¼Œèƒ½åƒäººä¸€æ ·**æ€è€ƒ â†’ è¡ŒåŠ¨ â†’ è§‚å¯Ÿ â†’ å†æ€è€ƒ**ï¼Œé€šè¿‡å¾ªç¯è¿­ä»£è§£å†³å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡ã€‚

<Aside type="tip">Agent ç‰¹åˆ«é€‚åˆå¤„ç†éœ€è¦å¤šæ­¥éª¤ã€å¤šå·¥å…·åä½œçš„å¤æ‚ä»»åŠ¡ã€‚</Aside>

---

## ä¸‰åˆ†é’Ÿä¸Šæ‰‹

### è¿è¡Œä½ çš„ç¬¬ä¸€ä¸ª Agent

```java
import tech.smartboot.feat.ai.agent.ReActAgent;
import tech.smartboot.feat.ai.agent.FeatAgent;
import java.util.concurrent.ExecutionException;

public class AgentDemo {
    public static void main(String[] args) throws ExecutionException, InterruptedException {
        // åˆ›å»ºä¸€ä¸ª Agent
        FeatAgent agent = new ReActAgent();
        
        // äº¤ç»™å®ƒä¸€ä¸ªä»»åŠ¡
        String result = agent.execute(
            "æœç´¢æœ€æ–°çš„ Java 21 æ–°ç‰¹æ€§ï¼Œæ€»ç»“æˆ 3 ä¸ªè¦ç‚¹"
        ).get();  // ä½¿ç”¨ .get() è·å–å¼‚æ­¥ç»“æœ
        
        System.out.println(result);
    }
}
```

<Aside type="tip">`execute()` æ–¹æ³•è¿”å› `CompletableFuture<String>`ï¼Œéœ€è¦è°ƒç”¨ `.get()` è·å–æœ€ç»ˆç»“æœã€‚</Aside>

è¿è¡Œè¿™æ®µä»£ç ï¼ŒAgent ä¼šè‡ªåŠ¨ï¼š
1. åˆ†æä»»åŠ¡éœ€è¦æœç´¢ä¿¡æ¯
2. è°ƒç”¨æœç´¢å·¥å…·æŸ¥è¯¢ Java 21 ç‰¹æ€§
3. è¯»å–æœç´¢ç»“æœ
4. æ€»ç»“æˆ 3 ä¸ªè¦ç‚¹è¿”å›ç»™ä½ 

å®Œæ•´ç¤ºä¾‹è¯·å‚è§ [ReActAgentTest.java](https://gitee.com/smartboot/feat/blob/master/feat-ai/src/test/java/tech/smartboot/feat/ai/agent/ReActAgentTest.java)

---

## ReAct æ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ

ReAct = **Reasoningï¼ˆæ¨ç†ï¼‰+ Actingï¼ˆè¡ŒåŠ¨ï¼‰**

```mermaid
graph TD
    A[æ”¶åˆ°ä»»åŠ¡] --> B[æ€è€ƒï¼šæˆ‘éœ€è¦åšä»€ä¹ˆï¼Ÿ]
    B --> C[è¡ŒåŠ¨ï¼šè°ƒç”¨å·¥å…·]
    C --> D[è§‚å¯Ÿï¼šè·å–ç»“æœ]
    D --> E{ä»»åŠ¡å®Œæˆäº†å—ï¼Ÿ}
    E -->|æ²¡æœ‰| B
    E -->|å®Œæˆäº†| F[ç»™å‡ºæœ€ç»ˆç­”æ¡ˆ]
```

ä¸¾ä¸ªä¾‹å­ï¼š

ä½ è¯´ï¼š"æŸ¥æ‰¾ Feat æ¡†æ¶çš„æœ€æ–°ç‰ˆæœ¬ï¼Œå¹¶é˜…è¯»å®ƒçš„æ›´æ–°æ—¥å¿—"

Agent çš„æ€è€ƒè¿‡ç¨‹å¯èƒ½æ˜¯ï¼š

1. **æ€è€ƒ**ï¼šéœ€è¦çŸ¥é“ Feat çš„æœ€æ–°ç‰ˆæœ¬å·
2. **è¡ŒåŠ¨**ï¼šè°ƒç”¨æœç´¢å·¥å…·æœç´¢"Feat æ¡†æ¶æœ€æ–°ç‰ˆæœ¬"
3. **è§‚å¯Ÿ**ï¼šå¾—åˆ°ç‰ˆæœ¬å·æ˜¯ 1.4.3
4. **æ€è€ƒ**ï¼šç°åœ¨éœ€è¦è¯»å–æ›´æ–°æ—¥å¿—
5. **è¡ŒåŠ¨**ï¼šè°ƒç”¨ç½‘é¡µé˜…è¯»å·¥å…·è®¿é—®æ›´æ–°æ—¥å¿—é¡µé¢
6. **è§‚å¯Ÿ**ï¼šè·å–åˆ°æ›´æ–°å†…å®¹
7. **æ€è€ƒ**ï¼šå·²ç»è·å¾—è¶³å¤Ÿä¿¡æ¯ï¼Œå¯ä»¥æ€»ç»“ç­”æ¡ˆäº†
8. **å®Œæˆ**ï¼šè¿”å›æ•´ç†å¥½çš„æ›´æ–°æ—¥å¿—

---

## å†…ç½®å·¥å…·ä¸€è§ˆ

ReActAgent é»˜è®¤è‡ªå¸¦ 5 ä¸ªå¸¸ç”¨å·¥å…·ï¼Œå¼€ç®±å³ç”¨ï¼š

### 1. æœç´¢å·¥å…·ï¼ˆSearchToolï¼‰

æœç´¢ç½‘ç»œä¿¡æ¯ï¼Œæ”¯æŒç™¾åº¦å’Œå¿…åº”ã€‚

```json
Action: search
Action Input: {
  "query": "Feat æ¡†æ¶æœ€æ–°ç‰ˆæœ¬",
  "engine": "baidu",
  "max_results": 5
}
```

### 2. ç½‘é¡µé˜…è¯»å·¥å…·ï¼ˆWebPageReaderToolï¼‰

è¯»å–ç½‘é¡µå†…å®¹ï¼Œæå–æ–‡æœ¬ã€‚

```json
Action: web_page_reader
Action Input: {
  "url": "https://gitee.com/smartboot/feat/releases"
}
```

### 3. æ–‡ä»¶æ“ä½œå·¥å…·ï¼ˆFileOperationToolï¼‰

è¯»å†™æ–‡ä»¶ã€åˆ›å»ºç›®å½•ã€åˆ—å‡ºæ–‡ä»¶ç­‰ã€‚

```json
// è¯»å–æ–‡ä»¶
Action: file_operation
Action Input: {
  "action": "read_file",
  "path": "./README.md"
}

// å†™å…¥æ–‡ä»¶
Action: file_operation
Action Input: {
  "action": "write_file",
  "path": "./report.txt",
  "content": "åˆ†ææŠ¥å‘Šå†…å®¹..."
}

// åˆ—å‡ºç›®å½•
Action: file_operation
Action Input: {
  "action": "list_directory",
  "path": "./docs",
  "recursive": true
}
```

### 4. å¾…åŠäº‹é¡¹å·¥å…·ï¼ˆTodoListToolï¼‰

ç®¡ç†ä»»åŠ¡åˆ—è¡¨ï¼Œç”¨äºåˆ†è§£å¤æ‚ä»»åŠ¡ã€‚

```json
// åˆ›å»ºå¾…åŠåˆ—è¡¨
Action: todo_list
Action Input: { "action": "create" }

// æ·»åŠ ä»»åŠ¡
Action: todo_list
Action Input: {
  "action": "add",
  "list_id": "todo_list_123",
  "title": "æœç´¢èµ„æ–™",
  "description": "æœç´¢ Java 21 æ–°ç‰¹æ€§ç›¸å…³èµ„æ–™"
}

// æ ‡è®°å®Œæˆ
Action: todo_list
Action Input: {
  "action": "complete",
  "list_id": "todo_list_123",
  "item_id": 1
}
```

### 5. å­ Agent å·¥å…·ï¼ˆSubAgentToolï¼‰

åˆ›å»ºå­ Agent å¤„ç†å­ä»»åŠ¡ï¼Œå®ç°ä»»åŠ¡å§”æ´¾ã€‚

```json
Action: sub_agent
Action Input: {
  "agent_name": "research_agent",
  "task": "æ·±å…¥ç ”ç©¶ Java 21 çš„è™šæ‹Ÿçº¿ç¨‹ç‰¹æ€§"
}
```

---

## è‡ªå®šä¹‰é…ç½®

### é€‰æ‹© AI æ¨¡å‹

```java
import tech.smartboot.feat.ai.chat.ChatModelVendor;

ReActAgent agent = new ReActAgent(opts -> {
    opts.chatOptions()
        .model(ChatModelVendor.GiteeAI.DeepSeek_V32);  // ä½¿ç”¨ DeepSeek V3
});
```

### è®¾ç½®è¿­ä»£æ¬¡æ•°

é˜²æ­¢å¤æ‚ä»»åŠ¡é™·å…¥æ— é™å¾ªç¯ï¼š

```java
ReActAgent agent = new ReActAgent(opts -> {
    opts.maxIterations(15);  // æœ€å¤šè¿­ä»£ 15 æ¬¡
});
```

<Aside type="caution">å¤æ‚ä»»åŠ¡å¯èƒ½éœ€è¦æ›´å¤šè¿­ä»£æ¬¡æ•°ï¼Œä½†ä¹Ÿè¦è®¾ç½®ä¸Šé™é¿å…æ— é™å¾ªç¯ã€‚</Aside>

### å®Œæ•´é…ç½®ç¤ºä¾‹

```java
ReActAgent agent = new ReActAgent(opts -> {
    opts.maxIterations(20)                          // æœ€å¤§è¿­ä»£æ¬¡æ•°
        .chatOptions()
        .model(ChatModelVendor.GiteeAI.DeepSeek_V32)  // é€‰æ‹©æ¨¡å‹
        .temperature(0.7f);                         // æ§åˆ¶åˆ›é€ æ€§
});
```

---

## è‡ªå®šä¹‰å·¥å…·

å¦‚æœå†…ç½®å·¥å…·ä¸å¤Ÿç”¨ï¼Œä½ å¯ä»¥åˆ›å»ºè‡ªå·±çš„å·¥å…·ã€‚

### å®ç° AgentTool æ¥å£

```java
import tech.smartboot.feat.ai.agent.AgentTool;
import com.alibaba.fastjson2.JSONObject;
import java.util.concurrent.CompletableFuture;

public class CalculatorTool implements AgentTool {
    
    @Override
    public CompletableFuture<String> execute(JSONObject parameters) {
        String expression = parameters.getString("expression");
        // æ‰§è¡Œè®¡ç®—é€»è¾‘...
        String result = "è®¡ç®—ç»“æœ";
        return CompletableFuture.completedFuture(result);
    }
    
    @Override
    public String getName() {
        return "calculator";
    }
    
    @Override
    public String getDescription() {
        return "æ‰§è¡Œæ•°å­¦è®¡ç®—ï¼Œå‚æ•°ï¼šexpression (string) æ•°å­¦è¡¨è¾¾å¼";
    }
    
    @Override
    public String getParametersSchema() {
        return "{\n"
            + "  \"type\": \"object\",\n"
            + "  \"properties\": {\n"
            + "    \"expression\": {\"type\": \"string\", \"description\": \"æ•°å­¦è¡¨è¾¾å¼\"}\n"
            + "  },\n"
            + "  \"required\": [\"expression\"]\n"
            + "}";
    }
}
```

### æ³¨å†Œè‡ªå®šä¹‰å·¥å…·

```java
ReActAgent agent = new ReActAgent(opts -> {
    opts.addTool(new CalculatorTool());
});
```

ç°åœ¨ Agent å°±èƒ½ä½¿ç”¨ `calculator` å·¥å…·æ‰§è¡Œæ•°å­¦è®¡ç®—äº†ã€‚

---

## ç›‘æ§ Agent çŠ¶æ€

```java
import tech.smartboot.feat.ai.agent.AgentState;

// è·å–å½“å‰çŠ¶æ€
AgentState state = agent.getState();
System.out.println("Agent çŠ¶æ€: " + state);
```

çŠ¶æ€è¯´æ˜ï¼š

| çŠ¶æ€ | è¯´æ˜ |
|------|------|
| `IDLE` | ç©ºé—²ï¼Œç­‰å¾…ä»»åŠ¡ |
| `RUNNING` | æ­£åœ¨æ¨ç† |
| `TOOL_EXECUTION` | æ­£åœ¨æ‰§è¡Œå·¥å…· |
| `FINISHED` | ä»»åŠ¡å®Œæˆ |
| `ERROR` | æ‰§è¡Œå‡ºé”™ |

### å–æ¶ˆä»»åŠ¡

```java
agent.cancel();  // å–æ¶ˆæ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡
```

---

## å®æˆ˜æ¡ˆä¾‹

### æ¡ˆä¾‹ï¼šè‡ªåŠ¨åŒ–è°ƒç ”æŠ¥å‘Š

```java
import tech.smartboot.feat.ai.agent.ReActAgent;
import tech.smartboot.feat.ai.agent.FeatAgent;
import java.util.concurrent.ExecutionException;

public class ResearchReport {
    public static void main(String[] args) throws ExecutionException, InterruptedException {
        FeatAgent agent = new ReActAgent();
        
        String task = "è¯·å¸®æˆ‘å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š\n"
            + "1. æœç´¢ \"å¾®æœåŠ¡æ¡†æ¶ 2024 å‘å±•è¶‹åŠ¿\"\n"
            + "2. é˜…è¯» 3 ç¯‡ç›¸å…³æ–‡ç« \n"
            + "3. æ€»ç»“å…³é”®è¶‹åŠ¿\n"
            + "4. å°†æŠ¥å‘Šä¿å­˜åˆ° ./report.md";
        
        String result = agent.execute(task).get();
        System.out.println("è°ƒç ”å®Œæˆï¼");
        System.out.println(result);
    }
}
```

Agent ä¼šè‡ªåŠ¨ï¼š
1. æœç´¢ç›¸å…³æ–‡ç« 
2. é€ä¸€é˜…è¯»ç½‘é¡µå†…å®¹
3. æå–å…³é”®ä¿¡æ¯å¹¶æ€»ç»“
4. å°†æŠ¥å‘Šå†™å…¥æ–‡ä»¶

---

## æœ€ä½³å®è·µ

### 1. ä»»åŠ¡æè¿°è¦æ¸…æ™°

âŒ æ¨¡ç³Šçš„ä»»åŠ¡ï¼š"å¸®æˆ‘å¤„ç†è¿™ä¸ªæ–‡ä»¶"

âœ… æ¸…æ™°çš„ä»»åŠ¡ï¼š"è¯»å– ./data.csvï¼Œç»Ÿè®¡ç¬¬ä¸‰åˆ—çš„å¹³å‡å€¼ï¼Œå°†ç»“æœä¿å­˜åˆ° ./result.txt"

### 2. åˆç†è®¾ç½®è¿­ä»£æ¬¡æ•°

- ç®€å•ä»»åŠ¡ï¼ˆå•æ¬¡æœç´¢ï¼‰ï¼š5-10 æ¬¡
- ä¸­ç­‰ä»»åŠ¡ï¼ˆå¤šæ­¥éª¤å¤„ç†ï¼‰ï¼š10-20 æ¬¡
- å¤æ‚ä»»åŠ¡ï¼ˆéœ€è¦å¤šè½®æ¨ç†ï¼‰ï¼š20-50 æ¬¡

### 3. é€‰æ‹©åˆé€‚çš„æ¨¡å‹

- **å¿«é€Ÿä»»åŠ¡**ï¼šè½»é‡çº§æ¨¡å‹
- **å¤æ‚æ¨ç†**ï¼šDeepSeek V3ã€GPT-4ã€Claude
- **ä»£ç ç›¸å…³**ï¼šCodexã€CodeLlama

### 4. é”™è¯¯å¤„ç†

```java
import java.util.concurrent.ExecutionException;

try {
    String result = agent.execute(task).get();
} catch (ExecutionException e) {
    System.err.println("Agent æ‰§è¡Œå¤±è´¥: " + e.getCause().getMessage());
    // é‡è¯•æˆ–é™çº§å¤„ç†
} catch (InterruptedException e) {
    Thread.currentThread().interrupt();
    System.err.println("ä»»åŠ¡è¢«ä¸­æ–­");
}
```

---

## æ€»ç»“

**Agent çš„æ ¸å¿ƒä»·å€¼ï¼š**

- ğŸ¤– **è‡ªåŠ¨åŒ–**ï¼šä¸€æ¬¡æŒ‡ä»¤ï¼Œè‡ªåŠ¨å®Œæˆå¤šæ­¥éª¤ä»»åŠ¡
- ğŸ› ï¸ **å·¥å…·åŒ–**ï¼šå†…ç½®æœç´¢ã€æ–‡ä»¶æ“ä½œç­‰å¸¸ç”¨å·¥å…·
- ğŸ”§ **å¯æ‰©å±•**ï¼šè½»æ¾æ·»åŠ è‡ªå®šä¹‰å·¥å…·
- ğŸ§  **æ™ºèƒ½åŒ–**ï¼šåŸºäº ReAct èŒƒå¼ï¼Œèƒ½æ¨ç†ã€èƒ½è¡ŒåŠ¨

**é€‚ç”¨åœºæ™¯ï¼š**

- ä¿¡æ¯æ”¶é›†ä¸æ•´ç†
- æ–‡æ¡£å¤„ç†ä¸ç”Ÿæˆ
- ä»£ç å®¡æŸ¥ä¸åˆ†æ
- è‡ªåŠ¨åŒ–æµ‹è¯•ä¸éƒ¨ç½²
- ä»»ä½•éœ€è¦å¤šæ­¥éª¤åä½œçš„ä»»åŠ¡

ç°åœ¨ï¼Œä½ å¯ä»¥å¼€å§‹ç”¨ Agent æ„å»ºè‡ªå·±çš„æ™ºèƒ½åº”ç”¨äº†ï¼
