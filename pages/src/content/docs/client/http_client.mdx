---
title: HttpClientè¯¦è§£ ğŸŒ
description: Feat Client
sidebar:
    order: 1
---
import CheckAuthorize from '../../../components/CheckAuthorize.astro'

<CheckAuthorize/>

Feat HttpClient æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€çµæ´»ä¸”é«˜æ•ˆçš„ HTTP å®¢æˆ·ç«¯åº“ï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…è½»æ¾å‘é€ HTTP è¯·æ±‚ã€å¤„ç†å“åº”ï¼Œå¹¶æ”¯æŒå¤šç§é«˜çº§åŠŸèƒ½ã€‚å®ƒæ”¯æŒå¸¸è§çš„ HTTP æ–¹æ³•ï¼ˆå¦‚ GETã€POSTã€PUTã€DELETE ç­‰ï¼‰ï¼Œå¹¶æä¾›äº†çµæ´»çš„é…ç½®é€‰é¡¹ï¼Œä»¥æ»¡è¶³ä¸åŒåœºæ™¯ä¸‹çš„éœ€æ±‚ã€‚

Feat HttpClient çš„è®¾è®¡ç†å¿µæ³¨é‡æ€§èƒ½ã€æ˜“ç”¨æ€§å’Œæ‰©å±•æ€§ï¼Œèƒ½å¤Ÿä¸ Feat æ¡†æ¶çš„å…¶ä»–ç»„ä»¶æ— ç¼é›†æˆï¼Œä¸ºå¼€å‘è€…æä¾›ä¸€è‡´çš„å¼€å‘ä½“éªŒã€‚

## å¿«é€Ÿä¸Šæ‰‹

### å¼•å…¥ä¾èµ–

åœ¨ Maven é¡¹ç›®ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ä¾èµ–åˆ° `pom.xml`ï¼š

```xml
<dependency>
    <groupId>tech.smartboot.feat</groupId>
    <artifactId>feat-core</artifactId>
    <version>${feat.version}</version>
</dependency>
```

### å‘é€ç¬¬ä¸€ä¸ª GET è¯·æ±‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Feat HttpClient å‘é€ GET è¯·æ±‚å¹¶å¤„ç†å“åº”ï¼š

```java
import tech.smartboot.feat.core.client.HttpClient;
import java.io.IOException;

public class HttpClientDemo {
    public static void main(String[] args) throws IOException {
        // åˆ›å»º HttpClient å®ä¾‹
        HttpClient client = new HttpClient("https://www.baidu.com");

        // å‘é€ GET è¯·æ±‚
        client.get().onSuccess(response -> {
            // å¤„ç†å“åº”
            System.out.println("Status Code: " + response.statusCode());
            System.out.println("Body: " + response.body());
        }).done();
    }
}
```

---

## HttpClient å®ä¾‹åŒ–
HttpClient æä¾›äº† 2 ç§å®ä¾‹åŒ–æ–¹å¼ï¼š

**æ–¹å¼ä¸€ï¼šå®Œæ•´çš„è¯·æ±‚URL**
```java
HttpClient client = new HttpClient("http://127.0.0.1:8080");

HttpClient client = new HttpClient("https://smartboot.tech/feat/");
```
è¯¥ç§æ–¹å¼ä¼šè‡ªåŠ¨è§£æ URL ä¸­çš„ host å’Œ port ä¿¡æ¯ï¼Œå¹¶è¯†åˆ«æ˜¯å¦ä½¿ç”¨ HTTPS åè®®ã€‚

**æ–¹å¼äºŒï¼šæŒ‡å®š hostã€port**
```java
HttpClient httpClient = new HttpClient("127.0.0.1", 8080);

HttpClient httpClient = new HttpClient("smartboot.tech", 443);
```


## Options é…ç½®
é€šè¿‡ HttpClient.options() æ–¹æ³•æä¾›äº†å®¢æˆ·ç«¯çš„é…ç½®é€‰é¡¹ï¼Œæ”¯æŒé“¾å¼è°ƒç”¨ã€‚
### host
**ç±»å‹:** `String`

**é»˜è®¤å€¼:** `null`

æœåŠ¡åœ°å€ï¼Œå¿…å¡«

### port
**ç±»å‹:** `int`

**é»˜è®¤å€¼:** `80`

æœåŠ¡ç«¯å£


### connectTimeout
**ç±»å‹:** `int`

**é»˜è®¤å€¼:** `0`

è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ¯«ç§’

### readBufferSize
**ç±»å‹:** `int`

**é»˜è®¤å€¼:** `1024`

è¯»ç¼“å†²åŒºå¤§å°ï¼Œå•ä½ï¼šå­—èŠ‚ã€‚åˆç†çš„å¤§å°å¯ä»¥å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚

### writeBufferSize
**ç±»å‹:** `int`

**é»˜è®¤å€¼:** `1024`

å†™ç¼“å†²åŒºå¤§å°ï¼Œå•ä½ï¼šå­—èŠ‚ã€‚åˆç†çš„å¤§å°å¯ä»¥å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ï¼Œæé«˜æ€§èƒ½ã€‚

### debug
**ç±»å‹:** `boolean`

**é»˜è®¤å€¼:** `false`

æ˜¯å¦å¼€å¯è°ƒè¯•æ¨¡å¼ã€‚å¯ç”¨åä¼šåœ¨æ§åˆ¶å°æ‰“å°è¯·æ±‚å’Œå“åº”çš„è¯¦ç»†ä¿¡æ¯ã€‚

### proxy
**ç±»å‹:** `ProxyOptions`

**é»˜è®¤å€¼:** `null`

ä»£ç†é…ç½®ã€‚

## HTTPè¯·æ±‚
HttpClient æä¾›äº† rest() æ–¹æ³•ç”¨äºå‘é€é€šç”¨çš„ HTTP è¯·æ±‚ã€‚rest() æ–¹æ³•çš„å‚æ•°åŒ…æ‹¬ï¼š
- method: HTTP è¯·æ±‚æ–¹æ³•ï¼Œå¦‚ GETã€POSTã€PUTã€DELETE ç­‰ã€‚
- path: è¯·æ±‚è·¯å¾„ï¼Œå¦‚ /api/userã€‚

è¯·æ±‚æ„é€ å®Œæ¯•åï¼Œéœ€è¦è°ƒç”¨ submit() æ–¹æ³•å‘é€è¯·æ±‚ã€‚

```java title=HttpRestDemo.java "rest" "HttpMethod.GET" "submit"
public class HttpRestDemo {
    public static void main(String[] args) throws IOException {
        // åˆ›å»º HttpClient å®ä¾‹
        HttpClient client = new HttpClient("https://smartboot.tech");
        client.options().debug(true);
        // å‘é€ GET è¯·æ±‚
        client.rest(HttpMethod.GET, "/feat/").onSuccess(response -> {
            System.out.println("Status Code: " + response.statusCode());
            System.out.println("Body: " + response.body());
        }).submit();
    }
}
```

å¯¹äº GETã€POST ç­‰å¸¸è§çš„ HTTP è¯·æ±‚æ–¹æ³•ï¼ŒHttpClient æä¾›äº†å¯¹åº”çš„æ–¹æ³•ï¼Œå¦‚ get()ã€post() ç­‰ï¼Œä¾‹å¦‚ï¼š
```java title=HttpGetDemo.java "get" "submit"
public class HttpGetDemo {
    public static void main(String[] args) {
        HttpClient httpClient = new HttpClient("https://smartboot.tech");
        httpClient.get("/feat/")
                .onSuccess(response -> System.out.println(response.body()))
                .onFailure(Throwable::printStackTrace)
                .submit();
    }
}
```

## å¼‚æ­¥å›è°ƒ
HttpClient æä¾›äº†å¼‚æ­¥å›è°ƒæœºåˆ¶ï¼Œå¯ä»¥åœ¨è¯·æ±‚å‘é€åç«‹å³è¿”å›ï¼Œè€Œä¸éœ€è¦ç­‰å¾…è¯·æ±‚å®Œæˆã€‚

### onResponseHeader
å½“å“åº” Header è§£æå®Œæˆåï¼Œä¼šè§¦å‘ onResponseHeader å›è°ƒã€‚
```java title=ResponseHeaderDemo.java "onResponseHeader"
public class ResponseHeaderDemo {
    public static void main(String[] args) {
        HttpClient httpClient = new HttpClient("https://smartboot.tech");
        httpClient.get("/feat/")
                .onResponseHeader(response -> {
                    for (String name : response.getHeaderNames()) {
                        System.out.println(name + ": " + response.getHeader(name));
                    }
                })
                .submit();
    }
}
```

### onResponseBody
å¯¹äºå­˜åœ¨å“åº”ä½“çš„è¯·æ±‚ï¼Œå½“`onResponseHeader`å›è°ƒç»“æŸå¹¶å¼€å§‹æ¥æ”¶åˆ°Bodyå†…å®¹æ—¶ï¼Œä¼šè§¦å‘ onResponseBody å›è°ƒã€‚
```java title=ResponseBodyDemo.java "onResponseBody"
public class ResponseBodyDemo {
    public static void main(String[] args) {
        HttpClient httpClient = new HttpClient("https://smartboot.tech");
        httpClient.get("/feat/")
                .onResponseBody(new Stream() {
                    @Override
                    public void stream(HttpResponse response, byte[] bytes, boolean end) throws IOException {
                        System.out.println("æ¥æ”¶åˆ°æ•°æ®ï¼š" + new String(bytes));
                        if (end) {
                            System.out.println("æ•°æ®æ¥æ”¶å®Œæ¯•");
                        }
                    }
                })
                .submit();
    }
}
```
onResponseBody çš„å‚æ•°æ˜¯ä¸€ä¸ª Stream å¯¹è±¡ï¼Œç”¨äºæ¶ˆè´¹å“åº”ä½“çš„å†…å®¹ï¼š
- response: HttpResponse å¯¹è±¡ï¼Œè¡¨ç¤ºå½“å‰çš„å“åº”ã€‚
- bytes: å­—èŠ‚æ•°ç»„ï¼Œè¡¨ç¤ºæ¥æ”¶åˆ°çš„å“åº”ä½“å†…å®¹ã€‚
- end: boolean å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ¥æ”¶åˆ°äº†å“åº”ä½“çš„æœ€åä¸€éƒ¨åˆ†å†…å®¹ã€‚
### onSuccess
å½“è¯·æ±‚æˆåŠŸæ—¶ï¼Œä¼šè§¦å‘ onSuccess å›è°ƒã€‚è¯¥å›è°ƒå‘ç”Ÿäº onResponseBody æ­£å¸¸ç»“æŸä¹‹åã€‚
### onFailure
å½“è¯·æ±‚å¤±è´¥æ—¶ï¼Œä¼šè§¦å‘ onFailure å›è°ƒã€‚